{% extends 'gestion/base.html' %}

{% block page_title %}Rupture de Contrat{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header bg-danger text-white">
                <h5 class="mb-0"><i class="fas fa-exclamation-triangle"></i> Rupture de Contrat</h5>
            </div>
            <div class="card-body">
                <div class="alert alert-warning">
                    <h6>Détails du contrat</h6>
                    <p><strong>Client:</strong> {{ contrat.client }}</p>
                    <p><strong>Véhicule:</strong> {{ contrat.vehicule }}</p>
                    <p><strong>Date de début:</strong> {{ contrat.date_debut|date:"d/m/Y" }}</p>
                    <p><strong>Date de fin initiale:</strong> {{ contrat.date_fin|date:"d/m/Y" }}</p>
                    <p><strong>Montant total initial:</strong> {{ contrat.montant_total }} FCFA</p>
                </div>
                
                <form method="post">
                    {% csrf_token %}
                    <div class="mb-3">
                        <label for="date_rupture" class="form-label">Date de rupture</label>
                        <input type="date" class="form-control" id="date_rupture" name="date_rupture" required>
                    </div>
                    
                    <div class="mb-3">
                        <label for="motif_rupture" class="form-label">Motif de la rupture</label>
                        <textarea class="form-control" id="motif_rupture" name="motif_rupture" rows="3" required></textarea>
                    </div>
                    
                    <div class="mb-3">
                        <label for="frais_rupture" class="form-label">Frais de rupture (FCFA)</label>
                        <input type="number" class="form-control" id="frais_rupture" name="frais_rupture" min="0" required>
                    </div>
                    
                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                        <a href="{% url 'detail_contrat' contrat.id %}" class="btn btn-secondary me-md-2">
                            <i class="fas fa-times"></i> Annuler
                        </a>
                        <button type="submit" class="btn btn-danger" onclick="return confirm('Êtes-vous sûr de vouloir rompre ce contrat ?');">
                            <i class="fas fa-exclamation-triangle"></i> Confirmer la rupture
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}