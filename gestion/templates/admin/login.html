{% extends "admin/base.html" %}
{% load i18n static %}

{% block title %}{% trans 'Connexion' %} | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block extrastyle %}
{{ block.super }}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<link rel="stylesheet" href="{% static 'admin/css/custom_admin.css' %}?v=3">
<style>
    /* Minimal inline helpers to ensure the login picks up variables if necessary */
    :root { --primary-color: #ff6b00; --primary-dark: #e55a00; }
    .login-box { max-width:420px }
</style>
{% endblock %}

{% block content %}
<div class="login-container">
    <div class="login-box">
        <div class="login-header">
            <h2>{{ site_header|default:_('Django administration') }}</h2>
            <p class="text-muted">Connectez-vous pour accéder à l'administration</p>
        </div>

    <form method="post" action="{% url 'admin:login' %}">
            {% csrf_token %}
            {% if form.errors %}
            <p class="text-danger">{{ form.errors }}</p>
            {% endif %}

            <div class="form-row mb-3">
                {{ form.username.label_tag }}
                {{ form.username }}
            </div>

            <div class="form-row mb-3">
                {{ form.password.label_tag }}
                {{ form.password }}
            </div>

            <div class="d-grid">
                <input type="submit" value="{% trans 'Se connecter' %}" class="button" />
            </div>

            <div class="password-forgot-link">
                <a href="{% url 'admin_password_reset' %}" class="text-orange"><i class="fas fa-key"></i> Mot de passe oublié ?</a>
            </div>

            {% if site_url %}
            <div class="mt-3 text-center">
                <a href="{{ site_url }}">Retour au site</a>
            </div>
            {% endif %}
        </form>
    </div>
</div>

{% endblock %}
